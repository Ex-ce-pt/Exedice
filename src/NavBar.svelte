<script lang="ts">
    
    import { tick } from "svelte";

    let thisObj: HTMLElement;
    let folded: boolean = false;
    let copyStatus: 'success' | 'fail' | 'undef' = 'undef';

    const toggleFold = (): void => {
        folded = !folded;

        const style = getComputedStyle(thisObj);
        const height = style.getPropertyValue('--nav-height');

        thisObj.style.top = folded ? `calc(-${height})` : "0";
    }

    const goTo = (url: string): void => {
        window.open(url, '_blank');
    }

    const copy = (txt: string): void => {
        // Async is needed to update the actual element,
        // since when the same value is assigned to the copyStatus,
        // the element doesn't update
        navigator.clipboard.writeText(txt).then(async () => {
            copyStatus = 'undef';
            await tick();
            copyStatus = 'success';
        }).catch(async () => {
            copyStatus = 'undef';
            await tick();
            copyStatus = 'fail';
        });
    }

    setTimeout(toggleFold, 2000);

    // TODO:
    // SoundCloud, Gmail

</script>

<nav bind:this={thisObj}>

    <div class="content">

        <button title="Email" on:click={() => copy("except.dice@gmail.com")}>
            <svg
               width="100"
               height="100"
               viewBox="0 0 100 100"
               id="email-logo"
            >
                <path
                    d="M 43.531157,99.631787 C 27.218204,97.766382 11.461454,86.173211 4.5058462,70.918535 -1.5019487,57.742586 -1.5019487,42.3009 4.5058462,29.124934 9.0893112,19.072725 17.916645,10.056001 28.001169,5.1255056 59.285405,-10.169892 96.218273,10.408777 99.736864,45.095987 101.21477,59.66548 96.430046,73.637969 86.319362,84.278177 75.065634,96.121318 60.025942,101.51797 43.531157,99.631787 Z M 82.054509,70.188456 c 0.601881,-0.858827 0.693745,-3.535805 0.693745,-20.216483 0,-18.268102 -0.04245,-19.278991 -0.85209,-20.278062 l -0.852092,-1.05151 -31.123213,0.142585 c -30.688423,0.140565 -31.134117,0.155379 -31.903103,1.051493 -0.716671,0.835191 -0.779884,2.467596 -0.779884,20.135443 0,16.680678 0.0918,19.357657 0.69373,20.216483 l 0.693747,0.989914 H 49.99305 81.360762 Z M 54.226731,69.344595 C 41.358608,69.150346 28.997341,68.932294 26.757217,68.860042 l -4.072924,-0.131307 10.980477,-8.090529 10.980495,-8.090545 1.336946,1.077131 c 0.735333,0.592409 1.875262,1.375348 2.5332,1.739857 1.134657,0.628586 1.295276,0.587359 3.119536,-0.800732 1.057817,-0.80489 2.15362,-1.604208 2.435107,-1.776235 0.29513,-0.180395 5.200429,3.096804 11.586881,7.741103 9.705431,7.057907 12.928807,9.504915 12.173261,9.241259 -0.113861,-0.03973 -10.735355,-0.231133 -23.603465,-0.425365 z M 20.357408,49.793245 V 33.254967 l 3.032068,2.370446 c 12.342066,9.648931 18.320587,14.438255 18.338357,14.690632 0.01701,0.242092 -18.97935,14.54724 -20.813363,15.673409 -0.441786,0.271281 -0.557062,-3.080089 -0.557062,-16.196209 z m 47.907259,8.659135 c -5.882564,-4.28595 -10.735221,-7.936177 -10.783696,-8.111639 -0.08455,-0.306229 20.85712,-16.642632 21.724945,-16.947364 0.261696,-0.09191 0.422802,6.144959 0.422802,16.36854 0,9.084365 -0.150412,16.50939 -0.334241,16.500064 -0.183829,-0.0101 -5.147248,-3.523651 -11.02981,-7.809601 z M 36.724765,42.08581 24.347782,32.205629 37.059006,32.087454 c 6.991181,-0.06498 18.43585,-0.06498 25.432613,0 l 12.721379,0.118175 -12.511662,9.70652 C 55.819934,47.25072 49.944895,51.696814 49.645722,51.792331 49.346549,51.88778 43.532117,47.519915 36.724765,42.08581 Z"
                />
            </svg>            
        </button>

        <button title="Discord" on:click={() => copy("Exedice#7316")}>
            <svg
                width="100"
                height="100"
                viewBox="0 0 100 100"
                id="discord-logo"
            >
                <path
                    d="m 64.096087,12.0355 -2.637779,5.36271 c -7.558745,-1.12367 -15.158248,-0.896531 -22.808,0.05282 l -2.68272,-5.394012 C 29.127069,13.248311 20.490937,16.006893 15.39877,18.421448 8.5583951,28.448353 2.7634186,41.325758 0,57.803417 L 0.45916902,75.2063 C 6.5352168,80.296883 21.639148,87.282988 25.772083,87.9645 c 1.638405,-2.032566 4.845834,-7.038163 5.500258,-8.817852 -1.479858,-0.529422 -6.825507,-2.793299 -8.384231,-4.094912 1.365676,-0.997242 1.903109,-1.529965 1.903109,-1.529965 0,0 10.981925,5.778825 25.377393,5.626833 14.395466,-0.15199 25.209355,-5.648355 25.209355,-5.648355 0,0 1.483923,1.223653 1.869893,1.57301 -1.128718,1.069501 -8.454572,4.104694 -8.454572,4.104694 0,0 4.325842,7.92067 5.445549,8.733723 C 79.157425,87.303633 98.572353,77.598989 99.637723,75.174994 99.95929,71.086989 100.24334,63.241967 99.672893,57.803417 98.279502,44.941861 93.346862,30.48537 84.733292,18.425362 78.420626,15.235637 71.471289,13.60935 64.096087,12.0355 Z m 2.66318,31.743874 a 9.1286709,9.9545661 0 0 1 9.128671,9.954567 9.1286709,9.9545661 0 0 1 -9.128671,9.954565 9.1286709,9.9545661 0 0 1 -9.12867,-9.954565 9.1286709,9.9545661 0 0 1 9.12867,-9.954567 z m -33.308316,0.197604 a 9.1286709,9.9545661 0 0 1 9.128671,9.954567 9.1286709,9.9545661 0 0 1 -9.128671,9.954565 9.1286709,9.9545661 0 0 1 -9.12867,-9.954565 9.1286709,9.9545661 0 0 1 9.12867,-9.954567 z"
                />
            </svg>
        </button>

        <button title="GitHub" on:click={() => goTo('https://github.com/Ex-ce-pt')}>
            <svg
                width="512"
                height="512"
                viewBox="0 0 512 512.00002"
                id="github-logo"
            >
                <path
                    d="M 256 0 A 256 256 0 0 0 0 256 A 256 256 0 0 0 192.9668 503.60742 C 192.9313 491.76688 192.79813 447.7772 192.78711 445.0957 C 162.76699 451.85506 147.43723 447.28769 129 441.73242 C 110.56277 436.17716 96.15947 394.10616 91.775391 389.04883 C 87.391311 383.99149 83.750269 380.72636 78.164062 377.24805 C 72.577856 373.76973 62.566838 368.4209 69.318359 363.61719 C 76.069881 358.81347 80.251033 360.37211 96.300781 366.39062 C 121.95556 380.33663 135.1736 415.90656 159.59961 415.92383 C 184.02561 415.94113 193.12109 409.71289 193.12109 409.71289 C 193.12109 409.71289 196.10678 379.71206 208.41797 375.55664 C 201.24817 374.69029 103.62731 370.30774 94.716797 282.64258 C 85.806288 194.97741 118.21484 180.88867 118.21484 180.88867 C 118.21484 180.88867 103.48479 124.31041 124.05469 111.98438 C 146.97997 107.70507 192.49609 138.53125 192.49609 138.53125 C 192.49609 138.53125 222.41382 128.96427 255.98438 129.10352 C 289.55492 129.24276 319.52344 138.51367 319.52344 138.51367 C 319.52344 138.51367 345.98965 109.41146 388.25586 111.3125 C 404.80368 131.31953 393.5 180.10742 393.5 180.10742 C 393.5 180.10742 420.64758 180.06397 415.86328 275.99414 C 411.07898 371.92427 302.46484 375.42969 302.46484 375.42969 C 302.46484 375.42969 309.09244 374.58367 315.70508 395.25391 C 321.44334 413.19094 320.09603 484.12251 319.62305 503.48047 A 256 256 0 0 0 512 256 A 256 256 0 0 0 256 0 z M 261.9668 511.57422 L 250.08789 511.57812 A 256 256 0 0 0 256 512 A 256 256 0 0 0 261.9668 511.57422 z "
                />
           </svg>
        </button>

        <button title="YouTube" on:click={() => goTo('https://www.youtube.com/@ExediceWhyNot')}>
            <svg
               width="100"
               height="100"
               viewBox="0 0 100 100"
               id="youtube-logo"
            >
              <path
                 d="M 15 17.5 C 6.6900083 17.5 0 24.190008 0 32.5 L 0 67.5 C 0 75.809992 6.6900083 82.5 15 82.5 L 85 82.5 C 93.309992 82.5 100 75.809992 100 67.5 L 100 32.5 C 100 24.190008 93.309992 17.5 85 17.5 L 15 17.5 z M 40 35 L 60 50 L 40 65 L 40 35 z "
               />
            </svg>

        </button>

        <button title="SoundCloud" on:click={() => goTo('https://soundcloud.com/exedice-ex_ce_pt')}>
            <svg
               width="100"
               height="100"
               viewBox="0 0 100 100"
               id="soundcloud-logo"
            >
               <path
                 d="M 50,0 A 50,50 0 0 0 0,50 50,50 0 0 0 50,100 50,50 0 0 0 100,50 50,50 0 0 0 50,0 Z m 11.640625,31.175781 c 14.053738,1.895808 16.669132,13.960449 16.978516,17.039063 1.411028,-0.545038 2.799819,-0.691715 4.18164,-0.740235 6.65559,0.408344 10.563435,4.337361 10.583985,11.246094 0.02055,6.908733 -5.819824,10.850026 -13.607422,10.033203 l -26.701172,-0.02148 c -0.765517,-0.03274 -1.098495,-0.65649 -1.109375,-1.501953 l 0.119141,-34.421875 c 3.889082,-1.953114 6.480409,-1.508181 9.554687,-1.632813 z m -11.847656,2.462891 c 0.878758,-0.004 1.132812,0.814453 1.132812,0.814453 0.509908,11.913217 0.486328,22.092533 0.01953,33.699219 0,0 -0.319283,0.596556 -1.09375,0.597656 -0.774454,0.0011 -1.179687,-0.582031 -1.179687,-0.582031 -0.437535,-11.218153 -0.542172,-22.451208 -0.02344,-33.710938 0,0 0.265773,-0.814359 1.144531,-0.818359 z m -3.660157,2.085937 c 0.814905,-0.0089 1.089844,0.763672 1.089844,0.763672 0.217054,10.569403 0.464672,21.13013 0,31.699219 0,0 -0.263563,0.580538 -1.078125,0.585938 -0.814563,0.0054 -1.054687,-0.628907 -1.054687,-0.628907 C 44.667358,57.596488 44.705583,47.048043 45.078125,36.5 c 0,0 0.239793,-0.766491 1.054687,-0.775391 z m -10.851562,2.5625 c 0.750507,-0.002 0.857422,0.574219 0.857422,0.574219 0.491246,9.810569 0.597816,19.621071 0.0078,29.431641 0,0 -0.306312,0.506112 -0.849609,0.507812 -0.543298,0.0017 -0.867187,-0.505859 -0.867187,-0.505859 -0.548608,-9.772079 -0.548392,-19.587939 -0.01367,-29.44336 0,10e-7 0.114728,-0.562453 0.865234,-0.564453 z m 3.601562,0.363282 c 0.747681,-0.0034 0.904297,0.753906 0.904297,0.753906 0.631791,9.616932 0.495797,19.234631 0.01172,28.851562 0,0 -0.296299,0.539769 -0.90039,0.542969 C 38.294338,68.802029 37.951172,68.25 37.951172,68.25 37.54599,58.59307 37.240999,48.947213 37.9375,39.40625 c 0,0 0.197642,-0.752459 0.945312,-0.755859 z m -7.203124,0.330078 c 0.669086,-0.0094 0.765624,0.65625 0.765624,0.65625 0.75212,9.514832 0.629198,19.118019 -0.01953,28.75 0,0 -0.287225,0.433534 -0.753906,0.427734 -0.466681,-0.0058 -0.738281,-0.431641 -0.738281,-0.431641 -0.476272,-9.579347 -0.697174,-19.158926 -0.05078,-28.738281 0,0 0.127782,-0.654662 0.796876,-0.664062 z m 10.851562,0.347656 c 0.689851,0.0025 0.921875,0.570313 0.921875,0.570313 0.505614,9.40414 0.614937,18.762876 0.0625,28.109374 0,0 -0.249924,0.807233 -1.015625,0.820313 -0.765702,0.01308 -1.046875,-0.804687 -1.046875,-0.804687 -0.328772,-9.41678 -0.385676,-18.8042 0.09375,-28.132813 0,0 0.294525,-0.565 0.984375,-0.5625 z m -14.421875,1.271484 c 0.500347,-0.0046 0.660156,0.427735 0.660156,0.427735 0.457811,8.9664 1.077891,17.92735 -0.0039,27.441406 0,0 -0.253732,0.359669 -0.664063,0.355469 -0.410323,-0.0042 -0.710937,-0.355469 -0.710937,-0.355469 -0.851192,-9.029563 -0.2454,-18.267461 -0.0039,-27.453125 0,0 0.222308,-0.411416 0.722656,-0.416016 z m -3.464844,3.214844 c 0.421882,0.0011 0.585938,0.466797 0.585938,0.466797 0.03511,4.731685 0.662415,10.187144 0.666015,14.1875 0.03938,2.464762 -0.47022,6.473844 -0.658203,9.816406 0,0 -0.187234,0.468462 -0.601562,0.472656 -0.414334,0.0042 -0.683594,-0.472656 -0.683594,-0.472656 -0.184984,-3.333503 -0.332277,-6.960901 -0.546875,-9.794922 0.07579,-3.390664 0.4724,-9.473202 0.5625,-14.208984 0,0 0.253904,-0.467897 0.675781,-0.466797 z m -7.011719,5.044922 c 0.433129,-0.01014 0.511719,0.492187 0.511719,0.492187 0.307272,3.038268 0.60931,6.138938 0.824219,9.167969 -0.185227,3.204903 -0.561597,6.390728 -0.84375,9.585938 0,0 -0.07435,0.417693 -0.453125,0.417969 -0.378773,2.73e-4 -0.527344,-0.457032 -0.527344,-0.457032 -0.247557,-3.176501 -0.566368,-6.388665 -0.738281,-9.527344 0.185069,-3.070941 0.479197,-6.123134 0.730469,-9.15625 0,0 0.06297,-0.513297 0.496093,-0.523437 z m -3.40039,0.369141 c 0.287498,2.97e-4 0.36914,0.339843 0.36914,0.339843 0.328291,2.910039 0.579714,6.012341 0.826172,9.126953 -0.243779,3.049171 -0.48915,6.097312 -0.814453,9.146485 0,0 -0.02611,0.35798 -0.396484,0.357422 -0.370376,-5.57e-4 -0.441406,-0.394531 -0.441406,-0.394531 -0.282482,-3.089211 -0.529319,-6.142511 -0.728516,-9.148438 0.215527,-3.053847 0.455454,-6.098796 0.794922,-9.111328 0,0 0.103127,-0.316703 0.390625,-0.316406 z m 6.904297,0.24414 c 0.37456,-0.0071 0.503906,0.417969 0.503906,0.417969 0.244204,2.912655 0.586408,5.873211 0.794922,8.890625 -0.171719,3.134637 -0.541112,6.253716 -0.757813,9.404297 0,0 -0.105455,0.516272 -0.550781,0.513672 -0.445321,-0.0026 -0.583984,-0.525391 -0.583984,-0.525391 -0.191838,-3.147594 -0.5051,-6.245554 -0.675781,-9.279297 0.169023,-3.045378 0.466908,-6.002946 0.710937,-8.996093 0,0 0.184028,-0.418682 0.558594,-0.425782 z m -10.332031,1.261719 c 0.311853,-0.0049 0.328125,0.453125 0.328124,0.453125 0.315041,2.556487 0.656659,5.070564 0.90625,7.605469 -0.304686,2.515044 -0.609375,5.068477 -0.914062,7.671875 0,0 -0.08198,0.306494 -0.335938,0.308594 -0.25396,0.0021 -0.363281,-0.316407 -0.363281,-0.316407 -0.263019,-2.536145 -0.526042,-5.086735 -0.7890622,-7.652343 0.2438355,-2.575779 0.4558002,-5.127624 0.7851562,-7.617188 0,0 0.07096,-0.448225 0.382813,-0.453125 z m -3.1542974,2.955078 c 0.3171291,0.0038 0.3320313,0.34375 0.3320313,0.34375 L 8.59375,58.765625 7.8261719,63.65625 c 0,0 -0.06912,0.275584 -0.2519531,0.271484 -0.182834,-0.0041 -0.2714844,-0.259765 -0.2714844,-0.259765 l -0.6132813,-4.900391 0.5742188,-4.71289 c 0,0 0.06959,-0.369035 0.3867187,-0.365235 z"
                />
            </svg>
        </button>

        <button title="GameJolt" on:click={() => goTo('https://gamejolt.com/@Exedice')}>
            <svg
               width="16"
               height="17"
               viewBox="0 0 16 17"
               id="gamejolt-logo"
            >
               <path
                    d="M 4 0 L 4 2 L 3 2 L 3 4 L 2 4 L 2 6 L 1 6 L 1 8 L 0 8 L 0 10 L 6 10 L 6 13 L 5 13 L 5 14 L 4 14 L 4 16 L 5 16 L 5 15 L 6 15 L 6 14 L 7 14 L 7 13 L 8 13 L 8 12 L 9 12 L 9 11 L 10 11 L 10 10 L 11 10 L 11 9 L 12 9 L 12 8 L 13 8 L 13 7 L 14 7 L 14 6 L 15 6 L 15 5 L 12 5 L 12 4 L 13 4 L 13 3 L 14 3 L 14 2 L 15 2 L 15 1 L 16 1 L 16 0 L 4 0 z M 4 16 L 3 16 L 3 17 L 4 17 L 4 16 z M 5 2 L 12 2 L 12 3 L 11 3 L 11 4 L 10 4 L 10 5 L 9 5 L 9 6 L 8 6 L 8 7 L 9 7 L 9 8 L 8 8 L 8 7 L 7 7 L 7 8 L 6 8 L 6 7 L 5 7 L 5 8 L 4 8 L 4 7 L 3 7 L 3.0117188 6 L 3 6 L 3.0117188 5.9980469 L 3.0117188 6 L 4 6 L 4 4 L 5 4 L 5 2 z M 4 6 L 4 7 L 5 7 L 5 6 L 4 6 z M 6 7 L 7 7 L 7 6 L 6 6 L 6 7 z M 10 7 L 11 7 L 11 8 L 10 8 L 10 7 z "
                />
            </svg>
        </button>


    </div>

    <button on:click={toggleFold}></button>

    {#key copyStatus}
    <div
        class="copy-status"
        data-status={copyStatus}
    >
        {#if copyStatus === 'success'}
        Copied to Clipboard!
        {:else if copyStatus === 'fail'}
        Failed to Copy!
        {/if}
    </div>
    {/key}

</nav>

<style>

    nav {
        --nav-height: 5em;
        --toggle-height: 1em;
        --animation-duration: 0.5s;

        display: grid;
        grid-template-rows: 1fr var(--toggle-height);
        position: fixed;
        top: 0;
        left: 0;
        width: calc(100vw - var(--scrollbar-width));
        height: calc(var(--nav-height) + var(--toggle-height));
        background-color: var(--color-bg);
        z-index: 100;
        overflow-x: scroll;
        transition: top var(--animation-duration) var(--ease-out);
    }

    nav::-webkit-scrollbar {
        display: none;
    }

    nav > button {
        width: 100%;
        height: var(--toggle-height);
        background-color: var(--color-shaded);
    }

    .content {
        display: flex;
        align-items: center;
        height: var(--nav-height);
    }

    .content > button {
        height: 50%;
        aspect-ratio: 1 / 1;
        padding: 0;
        margin: 0.5em;
        background-color: transparent;
        border: none;
    }

    button > svg {
        width: 100%;
        height: 100%;
        stroke: none;
        fill: var(--color-shaded);
        transition: fill 0.2s ease;
    }

    button:hover > svg {
        fill: cyan;
    }
    
    button {
        cursor: pointer;
    }

    .copy-status {
        position: absolute;
        top: -50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 7px;
        border: 3px solid green;
        border-radius: 1em;
        background-color: var(--color-bg);
        font-size: var(--very-small-font-size);
        font-weight: bold;
        user-select: none;
        -webkit-user-select: none;
    }

    .copy-status[data-status="success"] {
        color: green;
    }

    .copy-status[data-status="fail"] {
        color: red;
    }

    .copy-status:not([data-status="undef"]) {
        animation-name: show-copy-status;
        animation-duration: 2s;
        animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
        animation-fill-mode: forwards;
        animation-direction: alternate;
        animation-iteration-count: 2;
    }

    @keyframes show-copy-status {
        0% { top: -50%; }
        100% { top: 50%; }
    }

</style>